<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <title>Japanese learning</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
    body{
        font-family: sans-serif;
        text-align: center;
        background-color: var(--color-bg-1, white);
        color: var(--color-fg-1, black);
    }
    #center{
        display: inline-block;
        position: absolute;
        left: 50%;
        top: 10%;
        transform: translateX(-50%);
    }
    #char{
        display: inline-block;
        font-size: 9em;
        border: 9px solid var(--color-fg-1, black);
        border-radius: 35px;
        padding: 0.3em;
        line-height: 1em;
    }
    #romaji{
        margin-top: 1em;
        color: var(--color-fg-1, black);
        background-color: var(--color-bg-1, white);
        border: 5px solid var(--color-fg-1, black);
        border-radius: 5px;
        width: 10em;
        padding: 0.3em;
        outline: none;
        font-size: 2em;
        text-align: center;
    }
    #score{
        font-weight: bold;
        font-size: 2em;
        position: absolute;
        top: 0.3em;
        left: 0.3em;
    }
    #options{
        font-weight: bold;
        font-size: 1.1em;
        position: absolute;
        top: 0.3em;
        right: 0.3em;
        text-align: left;
        user-select: none;
    }
    #light{
        cursor: pointer;
    }
    #correction{
        font-weight: bold;
        font-size: 2em;
        margin-top: 20px;
    }
    hr{
        margin-top: 0.5em;
        margin-bottom: 0.5em;
    }
    </style>
</head>
<body>
<div id="score"></div>
<div id="options">
    <span id="light">Dark Mode</span>
    <hr>
    <input onclick="change_check(this);" type="checkbox" id="hiragana"><label for="hiragana">Hiragana</label><br>
    <input onclick="change_check(this);" type="checkbox" id="dakuten_hiragana"><label for="dakuten_hiragana">Dakuten hiragana</label><br>
    <input onclick="change_check(this);" type="checkbox" id="combo_hiragana"><label for="combo_hiragana">Combination hiragana</label><br>
    <input onclick="change_check(this);" type="checkbox" id="katakana"><label for="katakana">Katakana</label><br>
    <input onclick="change_check(this);" type="checkbox" id="dakuten_katakana"><label for="dakuten_katakana">Dakuten katakana</label><br>
    <input onclick="change_check(this);" type="checkbox" id="combo_katakana"><label for="combo_katakana">Combination katakana</label>
    <hr>
    Font: <br>
    <input onclick="change_font(this.value);" type="radio" id="check-serif" value="serif" name="font"><label for="check-serif">Serif</label>
    <input onclick="change_font(this.value);" type="radio" id="check-sans-serif" value="sans-serif" name="font"><label for="check-sans-serif">Sans serif</label>
</div>
<div id="center">
    <div id="char"></div><br>
    <input placeholder="Romaji" type="text" id="romaji">
    <div id="correction"></div>
</div>
<script>
let romaji = document.getElementById("romaji");
let char = document.getElementById("char");
let score_div = document.getElementById("score");
let correction = document.getElementById("correction");
let options_checkbox = [
    document.getElementById("hiragana"),
    document.getElementById("dakuten_hiragana"),
    document.getElementById("combo_hiragana"),
    document.getElementById("katakana"),
    document.getElementById("dakuten_katakana"),
    document.getElementById("combo_katakana"),
];
let font = "sans-serif";
document.getElementById("check-"+font).checked = true;
let options = [true, false, false, false, false, false];
for(let i = 0; i < options_checkbox.length; i++){
    if(i < options.length && options[i]){
        options_checkbox[i].checked = true;
    }
    else{
        options_checkbox[i].checked = false;
    }
}
let stuff = [
[["あ", ["a"]], ["い", ["i"]], ["う", ["u"]], ["え", ["e"]], ["お", ["o"]],
["か", ["ka"]], ["き", ["ki"]], ["く", ["ku"]], ["け", ["ke"]], ["こ", ["ko"]],
["さ", ["sa"]], ["し", ["si", "shi"]], ["す", ["su"]], ["せ", ["se"]], ["そ", ["so"]],
["た", ["ta"]], ["ち", ["chi"]], ["つ", ["tsu"]], ["て", ["te"]], ["と", ["to"]],
["な", ["na"]], ["に", ["ni"]], ["ぬ", ["nu"]], ["ね", ["ne"]], ["の", ["no"]],
["は", ["ha"]], ["ひ", ["hi"]], ["ふ", ["hu", "fu"]], ["へ", ["he"]], ["ほ", ["ho"]],
["ま", ["ma"]], ["み", ["mi"]], ["む", ["mu"]], ["め", ["me"]], ["も", ["mo"]],
["や", ["ya"]], ["ゆ", ["yu"]], ["よ", ["yo"]],
["ら", ["ra"]], ["り", ["ri"]], ["る", ["ru"]], ["れ", ["re"]], ["ろ", ["ro"]],
["わ", ["wa"]], ["を", ["wo"]], ["ん", ["n"]]],

[["が", ["ga"]], ["ぎ", ["gi"]], ["ぐ", ["gu"]], ["げ", ["ge"]], ["ご", ["go"]],
["ざ", ["za"]], ["じ", ["ji"]], ["ず", ["zu"]], ["ぜ", ["ze"]], ["ぞ", ["zo"]],
["だ", ["da"]], ["ぢ", ["di"]], ["づ", ["du"]], ["で", ["de"]], ["ど", ["do"]],
["ぱ", ["pa"]], ["ぴ", ["pi"]], ["ぷ", ["pu"]], ["ぺ", ["pe"]], ["ぽ", ["po"]],
["ば", ["ba"]], ["び", ["bi"]], ["ぶ", ["bu"]], ["べ", ["be"]], ["ぼ", ["bo"]]],

[["きゃ", ["kya"]], ["きゅ", ["kyu"]], ["きょ", ["kyo"]], ["ぎゃ", ["gya"]], ["ぎゅ", ["gyu"]],
["ぎょ", ["gyo"]], ["しゃ", ["sha"]], ["しゅ", ["shu"]], ["しょ", ["sho"]], ["じゃ", ["jya"]],
["じゅ", ["jyu"]], ["じょ", ["jyo"]], ["ちゃ", ["cha"]], ["ちゅ", ["chu"]], ["ちょ", ["cho"]],
["ぢゃ", ["dya"]], ["ぢゅ", ["dyu"]], ["ぢょ", ["dyo"]], ["にゃ", ["nya"]], ["にゅ", ["nyu"]],
["にょ", ["nyo"]], ["ひゃ", ["hya"]], ["ひゅ", ["hyu"]], ["ひょ", ["hyo"]], ["びゃ", ["bya"]],
["びゅ", ["byu"]], ["びょ", ["byo"]], ["ぴゃ", ["pya"]], ["ぴゅ", ["pyu"]], ["ぴょ", ["pyo"]],
["みゃ", ["mya"]], ["みゅ", ["myu"]], ["みょ", ["myo"]], ["りゃ", ["rya"]], ["りゅ", ["ryu"]],
["りょ", ["ryo"]]],

[["ア", ["a"]], ["イ", ["i"]], ["ウ", ["u"]], ["エ", ["e"]], ["オ", ["o"]],
["カ", ["ka"]], ["キ", ["ki"]], ["ク", ["ku"]], ["ケ", ["ke"]], ["コ", ["ko"]],
["サ", ["sa"]], ["シ", ["si", "shi"]], ["ス", ["su"]], ["セ", ["se"]], ["ソ", ["so"]],
["タ", ["ta"]], ["チ", ["chi"]], ["ツ", ["tsu"]], ["テ", ["te"]], ["ト", ["to"]],
["ナ", ["na"]], ["ニ", ["ni"]], ["ヌ", ["nu"]], ["ネ", ["ne"]], ["ノ", ["no"]],
["ハ", ["ha"]], ["ヒ", ["hi"]], ["フ", ["hu", "fu"]], ["ヘ", ["he"]], ["ホ", ["ho"]],
["マ", ["ma"]], ["ミ", ["mi"]], ["ム", ["mu"]], ["メ", ["me"]], ["モ", ["mo"]],
["ヤ", ["ya"]], ["ユ", ["yu"]], ["ヨ", ["yo"]],
["ラ", ["ra"]], ["リ", ["ri"]], ["ル", ["ru"]], ["レ", ["re"]], ["ロ", ["ro"]],
["ワ", ["wa"]], ["ヲ", ["wo"]], ["ン", ["n"]]],

[["ガ", ["ga"]], ["ギ", ["gi"]], ["グ", ["gu"]], ["ゲ", ["ge"]], ["ゴ", ["go"]],
["ザ", ["za"]], ["ジ", ["ji"]], ["ズ", ["zu"]], ["ゼ", ["ze"]], ["ゾ", ["zo"]],
["ダ", ["da"]], ["ヂ", ["di"]], ["ヅ", ["du"]], ["デ", ["de"]], ["ド", ["do"]],
["パ", ["pa"]], ["ピ", ["pi"]], ["プ", ["pu"]], ["ペ", ["pe"]], ["ポ", ["po"]],
["バ", ["ba"]], ["ビ", ["bi"]], ["ブ", ["bu"]], ["ベ", ["be"]], ["ボ", ["bo"]]],

[["キャ", ["KYA"]], ["キュ", ["KYU"]], ["キョ", ["KYO"]], ["ギャ", ["GYA"]], ["ギュ", ["GYU"]],
["ギョ", ["GYO"]], ["シャ", ["SHA"]], ["シュ", ["SHU"]], ["ショ", ["SHO"]], ["ジャ", ["JYA", "JA"]],
["ジュ", ["JYU", "JU"]], ["ジョ", ["JYO", "JO"]], ["チャ", ["CHA"]], ["チュ", ["CHU"]], ["チョ", ["CHO"]],
["ヂャ", ["DYA"]], ["ヂュ", ["DYU"]], ["ヂョ", ["DYO"]], ["ニャ", ["NYA"]], ["ニュ", ["NYU"]],
["ニョ", ["NYO"]], ["ヒャ", ["HYA"]], ["ヒュ", ["HYU"]], ["ヒョ", ["HYO"]], ["ビャ", ["BYA"]],
["ビュ", ["BYU"]], ["ビョ", ["BYO"]], ["ピャ", ["PYA"]], ["ピュ", ["PYU"]], ["ピョ", ["PYO"]],
["ミャ", ["MYA"]], ["ミュ", ["MYU"]], ["ミョ", ["MYO"]], ["リャ", ["RYA"]], ["リュ", ["RYU"]], ["リョ", ["RYO"]]]
];
let current_char;
let current_array;
let previous_char;
function next_char(){
    let array;
    let array_indices = [];
    for(let i = 0; i < options.length; i++){
        if(options[i]) array_indices.push(i);
    }
    let array_n = array_indices[Math.floor(Math.random()*array_indices.length)];
    if(array_n === undefined) return;
    array = stuff[array_n];
    do{
        current_char = Math.floor(Math.random()*array.length);
    } while(current_char == previous_char);
    previous_char = current_char;
    current_array = array;
    char.innerHTML = array[current_char][0];
}
let score = 0;
romaji.value = "";
romaji.focus();
romaji.onkeydown = function(e){
    if(e.keyCode == 13){
        if(current_array[current_char][1].indexOf(romaji.value.toLowerCase()) > -1){
            romaji.value = "";
            romaji.style.boxShadow = "none";
            score++;
            correction.innerHTML = "";
        }
        else{
            romaji.value = "";
            romaji.style.boxShadow = "0px 0px 12px #f009";
            score--;
            correction.innerHTML = current_array[current_char][0]+" is "+
            (current_array[current_char][1]+"").toUpperCase();
        }
        next_char();
        score_div.innerHTML = "Score: "+score;
    }
};

document.onkeydown = function(e){
    if(e.keyCode == 13) romaji.focus();
}

function change_font(e){
    char.style.fontFamily = e;
}

function change_check(e){
    options[options_checkbox.indexOf(e)] = e.checked;
}

score_div.innerHTML = "Score: "+score;
next_char();
</script>
<script src="../js/light.js"></script>
</body>
</html>